<div class="course-card-wrapper">
    <a href="{% url 'courses:course_detail' course.slug %}" class="text-decoration-none">
        <div class="course-card">
            <div class="course-card-image">
                {% if course.thumbnail %}
                <img src="{{ course.thumbnail.url }}" alt="{{ course.title }}" loading="lazy" class="course-thumbnail">
                {% else %}
                <div class="course-placeholder"
                    style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
                    <i class="fas fa-play" style="font-size: 3rem; opacity: 0.3; color: white;"></i>
                </div>
                {% endif %}

                <div class="course-play-overlay">
                    <div class="play-button">
                        <i class="fas fa-play"></i>
                    </div>
                </div>

                {% if course.is_free %}
                <span class="course-badge badge-free">
                    <i class="fas fa-gift me-1"></i>Free
                </span>
                {% elif course.discount_price %}
                <span class="course-badge badge-discount">
                    {{ course.discount_percentage|floatformat:0 }}% OFF
                </span>
                {% endif %}
            </div>

            <div class="course-card-body">
                <h6 class="course-card-title">{{ course.title|truncatechars:50 }}</h6>

                <div class="course-meta">
                    {% if course.teacher %}
                    <span class="course-instructor">
                        <i class="fas fa-user me-1"></i>
                        {{ course.teacher.get_full_name|default:course.teacher.email }}
                    </span>
                    {% endif %}

                    {% if course.category %}
                    <span class="course-category">
                        {{ course.category.name }}
                    </span>
                    {% endif %}

                    {% if course.language %}
                    <span class="course-language text-muted ms-2">
                        <i class="fas fa-language me-1"></i> {{ course.language }}
                    </span>
                    {% endif %}
                </div>

                <div class="course-stats">
                    <div class="d-flex align-items-center gap-2 mb-2">
                        {% if course.avg_rating %}
                        <div class="course-rating">
                            {% for i in "12345" %}
                            {% if forloop.counter <= course.avg_rating %} <i class="fas fa-star"></i>
                                {% else %}
                                <i class="far fa-star"></i>
                                {% endif %}
                                {% endfor %}
                                <span class="ms-1">({{ course.avg_rating|floatformat:1 }})</span>
                        </div>
                        {% endif %}

                        {% if course.student_count %}
                        <small class="text-muted">{{ course.student_count }} students</small>
                        {% endif %}
                    </div>
                </div>

                <div class="course-price">
                    {% if course.is_free %}
                    <span class="price-free">Free</span>
                    {% elif course.discount_price %}
                    <span class="price-original">₹{{ course.price }}</span>
                    <span class="price-current">₹{{ course.discount_price }}</span>
                    {% else %}
                    <span class="price-current">₹{{ course.price }}</span>
                    {% endif %}
                </div>
            </div>
        </div>
    </a>
</div>